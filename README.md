# TMK Test Task

## Описание
Данный репозиторий содержит решение тестового задания, состоящего из двух частей: SQL и C#. 

### Задание 1: SQL (PostgreSQL)
Реализовать базу данных «Библиотека» с функциональностью для хранения данных о книгах, авторах, читателях и истории выдачи/возврата книг.

**Требования:**
1. Создать схему таблиц.
2. Написать запросы:
   - Получение всех читателей, у которых больше 1 книги на руках.
   - Получение авторов, отсортированных по количеству книг в порядке убывания, при этом количество книг у автора должно быть больше среднего количества книг по авторам.
   - Получение списка всех книг, которые сейчас не находятся у читателей.
   - Получение списка книг, которые были у читателей на дату 01.01.2022.

**Решение:**  
Решение задачи находится в файле [FirstTask.md](./FirstTask.md), который содержит описание схемы таблиц и SQL-запросы для выполнения поставленных задач.

---

### Задание 2: C#
Разработать программу для управления данными о трубах с поддержкой многопользовательского режима.

**Функциональные требования:**
1. Ввод данных о трубах:
   - Номер трубы.
   - Качество (годная/брак).
   - Марка стали (выбор из справочника).
   - Размеры.
   - Вес.
2. Просмотр/добавление/удаление/редактирование данных.
3. Отображение итоговых данных:
   - Общее количество труб.
   - Количество годных/брака.
   - Общий вес.
4. Возможность фильтрации данных.
5. Выделение строк с качеством «Брак» красным цветом.
6. Управление пакетами труб:
   - Создание, редактирование, удаление пакетов.
   - Добавление труб в пакеты и удаление труб из пакетов.
7. Контроль вводимых данных:
   - Проверка числовых значений.
   - Проверка дат.
   - Проверка на пустые значения.
8. Запрет на редактирование/удаление данных трубы, если она находится в пакете.

# Пример работы

## Swagger


# Стэк приложения

## Бэкенд
- **Язык программирования:** C# 12
- **Фреймворк:** ASP.NET Core
- **ORM:** Entity Framework Core 
- **База данных:** PostgreSQL 15
- **Среда выполнения:** .NET 8

## Фронтенд
- **Язык программирования:** TypeScript
- **Фреймворк:** Next.js 13
- **Библиотека компонентов:** React 18.2
---
# API Endpoints

## Packages
- **GET** `/api/Packages` - Получить список пакетов
- **POST** `/api/Packages` - Создать пакет
- **GET** `/api/Packages/{id}` - Получить пакет по ID
- **PUT** `/api/Packages/{id}` - Обновить пакет по ID
- **DELETE** `/api/Packages/{id}` - Удалить пакет по ID
- **POST** `/api/Packages/{packageId}/add-pipes` - Добавить трубы в пакет
- **DELETE** `/api/Packages/{packageId}/remove-pipe/{pipeId}` - Удалить трубу из пакета
- **GET** `/api/Packages/{packageId}/pipes` - Получить трубы в пакете

## Pipes
- **GET** `/api/Pipes` - Получить список труб
- **POST** `/api/Pipes` - Создать трубу
- **GET** `/api/Pipes/{id}` - Получить трубу по ID
- **PUT** `/api/Pipes/{id}` - Обновить трубу по ID
- **DELETE** `/api/Pipes/{id}` - Удалить трубу по ID
- **GET** `/api/Pipes/statistics` - Получить статистику труб
- **GET** `/api/Pipes/filter` - Фильтровать трубы по параметрам

## SteelGrades
- **GET** `/api/SteelGrades` - Получить список марок стали
- **POST** `/api/SteelGrades` - Создать марку стали
- **GET** `/api/SteelGrades/{id}` - Получить марку стали по ID
- **PUT** `/api/SteelGrades/{id}` - Обновить марку стали по ID
- **DELETE** `/api/SteelGrades/{id}` - Удалить марку стали по ID

## Users
- **POST** `/api/Users/register` - Регистрация пользователя
- **POST** `/api/Users/login` - Авторизация пользователя

## Запуск проекта

### Инструкция
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/Zuzokin/TMK-test-task.git
   cd TMK-test-task
   ```
2. Запустите проект с помощью docker-compose:
    ```bash
    docker-compose up --build
    ```
3. Откройте сайт в браузере http://localhost:5000 или swagger http://localhost:8080/swagger/index.html




